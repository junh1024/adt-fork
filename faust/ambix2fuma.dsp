declare name		"ambix2fuma";
declare version 	"1.0";
declare author 		"AmbisonicDecoderToolkit";
declare license 	"GPL";
declare copyright	"(c) Aaron J. Heller 2014";

// bus with gains
gain(c) = R(c) with {
  R((c,cl)) = R(c),R(cl);
  R(1)      = _;
  R(0)      = !;
  //R(0)      = !:0; // if you need to preserve the number of outputs
  R(float(0)) = R(0);
  R(float(1)) = R(1);
  R(c)      = *(c);
};

// n = number of inputs
// m = number of output
matrix(n,m) = par(i,n,_) <: par(i,m,gain(A(i)):>_);

process = matrix(16,16);

A(00) = (0.7071067812,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(01) = (           0,            0,            0,            1,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(02) = (           0,            1,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(03) = (           0,            0,            1,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(04) = (           0,            0,            0,            0,            0,            0,            1,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(05) = (           0,            0,            0,            0,            0,            0,            0,  1.154700538,            0,            0,            0,            0,            0,            0,            0,            0);
A(06) = (           0,            0,            0,            0,            0,  1.154700538,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(07) = (           0,            0,            0,            0,            0,            0,            0,            0,  1.154700538,            0,            0,            0,            0,            0,            0,            0);
A(08) = (           0,            0,            0,            0,  1.154700538,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0);
A(09) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            1,            0,            0,            0);
A(10) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,  1.185854123,            0,            0);
A(11) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,  1.185854123,            0,            0,            0,            0);
A(12) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,  1.341640786,            0);
A(13) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,  1.341640786,            0,            0,            0,            0,            0);
A(14) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,            0,  1.264911064);
A(15) = (           0,            0,            0,            0,            0,            0,            0,            0,            0,  1.264911064,            0,            0,            0,            0,            0,            0);
